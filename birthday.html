<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>for you</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=Cinzel:wght@400;500;600&family=Lato:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet"/>
  <style>
    /* ================================================================
       CSS CUSTOM PROPERTIES (DESIGN TOKENS)
    ================================================================ */
    :root {
      --gold-lightest: #f2dda0;
      --gold-light:    #e8c97a;
      --gold:          #c9a84c;
      --gold-mid:      #b8952e;
      --gold-dark:     #9a7530;
      --gold-darker:   #7a5c20;
      --black:         #080806;
      --black-soft:    #0c0b09;
      --deep:          #0e0d0a;
      --dark:          #161410;
      --dark-mid:      #1e1c17;
      --dark-soft:     #252218;
      --dark-lighter:  #2e2b22;
      --cream:         #f5edd6;
      --cream-dim:     #ede0c4;
      --cream-muted:   #ddd0b2;
      --text-main:     #e8dfc8;
      --text-body:     #ccc0a0;
      --text-muted:    #9e9070;
      --text-dim:      #6b6050;
      --text-faint:    #4a4438;
      --border-bright: rgba(201, 168, 76, 0.35);
      --border:        rgba(201, 168, 76, 0.18);
      --border-soft:   rgba(201, 168, 76, 0.09);
      --border-faint:  rgba(201, 168, 76, 0.04);
      --glow:          rgba(201, 168, 76, 0.12);
      --glow-strong:   rgba(201, 168, 76, 0.28);
      --font-display:  'Cinzel', serif;
      --font-body:     'Cormorant Garamond', serif;
      --font-sans:     'Lato', sans-serif;
      --t-fast:  0.2s;
      --t-med:   0.45s;
      --t-slow:  0.85s;
    }

    /* ================================================================
       GLOBAL RESET & BASE
    ================================================================ */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background:   var(--black);
      color:        var(--text-main);
      font-family:  var(--font-body);
      overflow-x:   hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    ::selection {
      background: rgba(201, 168, 76, 0.28);
      color:      var(--cream);
    }

    img {
      display:   block;
      max-width: 100%;
    }

    button {
      border:      none;
      background:  transparent;
      cursor:      pointer;
      font-family: inherit;
      color:       inherit;
    }

    /* ================================================================
       SCROLLBAR
    ================================================================ */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: var(--black); }
    ::-webkit-scrollbar-thumb { background: var(--gold-dark); border-radius: 2px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--gold); }

    /* ================================================================
       PAGE SYSTEM
    ================================================================ */
    .page {
      display:    none;
      min-height: 100vh;
      width:      100%;
    }

    .page.active {
      display: block;
    }

    /* ================================================================
       GLOBAL PERSISTENT LAYERS
    ================================================================ */
    #particles-canvas {
      position:       fixed;
      inset:          0;
      pointer-events: none;
      z-index:        0;
      opacity:        0.58;
    }

    .noise-layer {
      position:       fixed;
      inset:          0;
      pointer-events: none;
      z-index:        0;
      opacity:        0.026;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.88' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-repeat: repeat;
      background-size:   200px 200px;
    }

    .vignette-layer {
      position:       fixed;
      inset:          0;
      pointer-events: none;
      z-index:        0;
      background:     radial-gradient(ellipse at center, transparent 52%, rgba(0, 0, 0, 0.62) 100%);
    }

    .cursor-glow {
      position:       fixed;
      pointer-events: none;
      z-index:        0;
      width:          300px;
      height:         300px;
      border-radius:  50%;
      background:     radial-gradient(circle, rgba(201, 168, 76, 0.042), transparent 68%);
      transform:      translate(-50%, -50%);
      top:            0;
      left:           -800px;
    }

    .page-fade {
      position:       fixed;
      inset:          0;
      background:     var(--black);
      z-index:        9999;
      pointer-events: none;
      opacity:        0;
      transition:     opacity 0.65s ease;
    }

    .page-fade.on {
      opacity:        1;
      pointer-events: all;
    }

    .progress-bar {
      position:   fixed;
      top:        0;
      left:       0;
      height:     1.5px;
      background: linear-gradient(90deg, var(--gold-dark), var(--gold-light), var(--gold));
      z-index:    200;
      width:      0%;
      box-shadow: 0 0 8px rgba(201, 168, 76, 0.5);
      transition: width 0.08s linear;
    }

    /* ================================================================
       PAGE 1 — LOCK SCREEN
    ================================================================ */
    #page-lock {
      position:        relative;
      min-height:      100vh;
      display:         flex;
      align-items:     center;
      justify-content: center;
      background:      var(--black);
      overflow:        hidden;
    }

    /* Pulsing ambient glow behind card */
    .lock-ambient {
      position:       absolute;
      width:          700px;
      height:         700px;
      top:            50%;
      left:           50%;
      transform:      translate(-50%, -50%);
      background:     radial-gradient(ellipse, rgba(201, 168, 76, 0.055), transparent 70%);
      pointer-events: none;
      animation:      ambient-breathe 7s ease-in-out infinite;
    }

    @keyframes ambient-breathe {
      0%, 100% {
        opacity:   0.5;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity:   1;
        transform: translate(-50%, -50%) scale(1.2);
      }
    }

    /* Rotating dashed rings */
    .lock-ring {
      position:       absolute;
      border-radius:  50%;
      top:            50%;
      left:           50%;
      border:         1px dashed rgba(201, 168, 76, 0.07);
      pointer-events: none;
    }

    .lock-ring-a {
      width:     520px;
      height:    520px;
      transform: translate(-50%, -50%);
      animation: ring-spin 40s linear infinite;
    }

    .lock-ring-b {
      width:     360px;
      height:    360px;
      transform: translate(-50%, -50%);
      animation: ring-spin 28s linear infinite reverse;
    }

    @keyframes ring-spin {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to   { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Corner frame ornaments */
    .lc {
      position: absolute;
      width:    68px;
      height:   68px;
      opacity:  0.2;
    }

    .lc-tl {
      top:         28px;
      left:        28px;
      border-top:  1px solid var(--gold);
      border-left: 1px solid var(--gold);
    }

    .lc-tr {
      top:          28px;
      right:        28px;
      border-top:   1px solid var(--gold);
      border-right: 1px solid var(--gold);
    }

    .lc-bl {
      bottom:       28px;
      left:         28px;
      border-bottom: 1px solid var(--gold);
      border-left:   1px solid var(--gold);
    }

    .lc-br {
      bottom:       28px;
      right:        28px;
      border-bottom: 1px solid var(--gold);
      border-right:  1px solid var(--gold);
    }

    /* Animated horizontal accent lines */
    .lhl {
      position:   absolute;
      height:     1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      opacity:    0.15;
      animation:  hline-pulse 4s ease-in-out infinite;
    }

    .lhl-t {
      top:       0;
      left:      50%;
      transform: translateX(-50%);
      width:     150px;
    }

    .lhl-b {
      bottom:          0;
      left:            50%;
      transform:       translateX(-50%);
      width:           150px;
      animation-delay: 2s;
    }

    @keyframes hline-pulse {
      0%, 100% { opacity: 0.1; width: 120px; }
      50%       { opacity: 0.3; width: 220px; }
    }

    /* Lock card container */
    .lock-card {
      position:           relative;
      z-index:            10;
      width:              min(420px, 92vw);
      padding:            60px 50px 52px;
      background:         linear-gradient(155deg, rgba(28, 26, 20, 0.96), rgba(12, 11, 9, 0.99));
      border:             1px solid var(--border);
      backdrop-filter:    blur(28px);
      -webkit-backdrop-filter: blur(28px);
      animation:          card-appear 1.3s cubic-bezier(0.22, 1, 0.36, 1) both;
    }

    @keyframes card-appear {
      from { opacity: 0; transform: translateY(44px) scale(0.95); }
      to   { opacity: 1; transform: none; }
    }

    .lock-card::before {
      content:    '';
      position:   absolute;
      top:        0;
      left:       50%;
      transform:  translateX(-50%);
      width:      72px;
      height:     1px;
      background: var(--gold);
      opacity:    0.55;
    }

    .lock-card::after {
      content:    '';
      position:   absolute;
      bottom:     0;
      left:       50%;
      transform:  translateX(-50%);
      width:      40px;
      height:     1px;
      background: var(--gold);
      opacity:    0.2;
    }

    /* Lock card text elements */
    .l-eyebrow {
      font-family:     var(--font-sans);
      font-size:       9px;
      font-weight:     300;
      letter-spacing:  0.45em;
      text-transform:  uppercase;
      color:           var(--gold);
      text-align:      center;
      margin-bottom:   30px;
      opacity:         0.7;
      animation:       slide-down 1.4s 0.25s both;
    }

    .l-title {
      font-family:    var(--font-display);
      font-size:      clamp(20px, 5vw, 28px);
      font-weight:    400;
      letter-spacing: 0.1em;
      text-align:     center;
      color:          var(--cream);
      line-height:    1.25;
      margin-bottom:  10px;
      animation:      slide-down 1.4s 0.4s both;
    }

    .l-sub {
      font-family:   var(--font-body);
      font-size:     15px;
      font-style:    italic;
      font-weight:   300;
      color:         var(--text-muted);
      text-align:    center;
      margin-bottom: 44px;
      animation:     slide-down 1.4s 0.55s both;
    }

    @keyframes slide-down {
      from { opacity: 0; transform: translateY(-16px); }
      to   { opacity: 1; transform: none; }
    }

    /* Divider with diamond center */
    .l-divider {
      display:       flex;
      align-items:   center;
      gap:           14px;
      margin-bottom: 36px;
      animation:     slide-down 1.4s 0.7s both;
    }

    .l-dline {
      flex:   1;
      height: 1px;
    }

    .l-dline-l {
      background: linear-gradient(90deg, transparent, var(--border));
    }

    .l-dline-r {
      background: linear-gradient(90deg, var(--border), transparent);
    }

    .l-gem {
      width:      5px;
      height:     5px;
      background: var(--gold);
      transform:  rotate(45deg);
      opacity:    0.55;
      flex-shrink: 0;
    }

    /* Code indicator dots */
    .code-dots {
      display:         flex;
      justify-content: center;
      gap:             18px;
      margin-bottom:   38px;
      animation:       slide-down 1.4s 0.82s both;
    }

    .dot {
      width:         13px;
      height:        13px;
      border-radius: 50%;
      border:        1px solid rgba(201, 168, 76, 0.35);
      background:    transparent;
      transition:    all 0.28s cubic-bezier(0.34, 1.56, 0.64, 1);
      position:      relative;
    }

    .dot.on {
      background:   var(--gold);
      border-color: var(--gold);
      box-shadow:   0 0 14px rgba(201, 168, 76, 0.55), 0 0 28px rgba(201, 168, 76, 0.2);
      transform:    scale(1.1);
    }

    .dot.on::after {
      content:       '';
      position:      absolute;
      inset:         -5px;
      border-radius: 50%;
      border:        1px solid rgba(201, 168, 76, 0.14);
      animation:     dot-ring 0.45s ease both;
    }

    @keyframes dot-ring {
      from { opacity: 0.9; transform: scale(0.7); }
      to   { opacity: 0;   transform: scale(1.8); }
    }

    /* Numpad grid */
    .numpad {
      display:               grid;
      grid-template-columns: repeat(3, 1fr);
      gap:                   10px;
      animation:             slide-down 1.4s 0.92s both;
    }

    .nb {
      position:      relative;
      padding:       17px 8px;
      background:    rgba(201, 168, 76, 0.03);
      border:        1px solid rgba(201, 168, 76, 0.1);
      color:         var(--text-main);
      font-family:   var(--font-body);
      font-size:     23px;
      font-weight:   300;
      letter-spacing: 0.04em;
      cursor:        pointer;
      transition:    background var(--t-fast), border-color var(--t-fast),
                     color var(--t-fast), transform var(--t-fast);
      overflow:      hidden;
      outline:       none;
      -webkit-tap-highlight-color: transparent;
      user-select:   none;
    }

    .nb::before {
      content:    '';
      position:   absolute;
      inset:      0;
      background: radial-gradient(ellipse at center, rgba(201, 168, 76, 0.18), transparent 72%);
      opacity:    0;
      transition: opacity var(--t-med);
    }

    .nb:hover {
      background:   rgba(201, 168, 76, 0.08);
      border-color: rgba(201, 168, 76, 0.28);
      color:        var(--gold-light);
      transform:    translateY(-1px);
    }

    .nb:hover::before { opacity: 1; }

    .nb:active {
      transform:  scale(0.95);
      background: rgba(201, 168, 76, 0.14);
    }

    .nb-wide { grid-column: span 2; }

    .nb-del {
      font-family:    var(--font-sans);
      font-size:      11px;
      font-weight:    300;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color:          var(--text-muted);
    }

    /* Ripple click effect */
    .ripple {
      position:       absolute;
      border-radius:  50%;
      width:          100px;
      height:         100px;
      background:     rgba(201, 168, 76, 0.16);
      transform:      scale(0);
      animation:      ripple-expand 0.5s linear;
      pointer-events: none;
    }

    @keyframes ripple-expand {
      to { transform: scale(3); opacity: 0; }
    }

    /* Error text */
    .l-err {
      text-align:     center;
      margin-top:     22px;
      font-family:    var(--font-sans);
      font-size:      10px;
      font-weight:    300;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color:          #c07060;
      opacity:        0;
      transition:     opacity 0.4s;
      height:         18px;
      animation:      slide-down 1.4s 1.05s both;
    }

    .l-err.show { opacity: 1; }

    /* Shake animation for wrong password */
    @keyframes card-shake {
      0%   { transform: translateX(0);  }
      15%  { transform: translateX(-7px); }
      30%  { transform: translateX(7px);  }
      45%  { transform: translateX(-5px); }
      60%  { transform: translateX(5px);  }
      75%  { transform: translateX(-3px); }
      90%  { transform: translateX(3px);  }
      100% { transform: translateX(0);  }
    }

    .card-shake {
      animation: card-shake 0.55s cubic-bezier(0.36, 0.07, 0.19, 0.97) both !important;
    }

    /* ================================================================
       PAGE 2 — BIRTHDAY
    ================================================================ */
    #page-birthday {
      background:  var(--black);
      overflow-x:  hidden;
    }

    /* ================================================================
       MUSIC PLAYER (FIXED)
    ================================================================ */
    .music-player {
      position:        fixed;
      bottom:          28px;
      right:           28px;
      z-index:         100;
      display:         flex;
      align-items:     center;
      gap:             16px;
      padding:         13px 22px 13px 16px;
      background:      rgba(12, 11, 9, 0.93);
      border:          1px solid var(--border);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      opacity:         0;
      transform:       translateY(24px);
      transition:      opacity 0.7s, transform 0.7s;
    }

    .music-player.visible {
      opacity:   1;
      transform: none;
    }

    .m-btn {
      width:           34px;
      height:          34px;
      display:         flex;
      align-items:     center;
      justify-content: center;
      color:           var(--gold);
      cursor:          pointer;
      flex-shrink:     0;
      transition:      color var(--t-fast), transform var(--t-fast);
    }

    .m-btn:hover {
      color:     var(--gold-light);
      transform: scale(1.08);
    }

    .m-btn svg {
      width:        18px;
      height:       18px;
      stroke:       currentColor;
      stroke-width: 1.5;
      fill:         none;
    }

    .icon-play { display: none; }

    .music-player.paused .icon-pause { display: none; }
    .music-player.paused .icon-play  { display: block; }

    .m-info {
      display:        flex;
      flex-direction: column;
      gap:            3px;
    }

    .m-label {
      font-family:    var(--font-sans);
      font-size:      8px;
      font-weight:    300;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color:          var(--text-dim);
    }

    .m-track {
      font-family: var(--font-body);
      font-size:   13px;
      font-style:  italic;
      color:       var(--cream-dim);
    }

    /* Animated equalizer bars */
    .eq {
      display:     flex;
      align-items: flex-end;
      gap:         2.5px;
      height:      18px;
      flex-shrink: 0;
    }

    .eq-b {
      width:         2px;
      border-radius: 1px;
      background:    var(--gold);
      animation:     eq-anim 1.1s ease-in-out infinite;
    }

    .eq-b:nth-child(1) { height: 38%; animation-delay: 0.00s; }
    .eq-b:nth-child(2) { height: 72%; animation-delay: 0.12s; }
    .eq-b:nth-child(3) { height: 100%; animation-delay: 0.26s; }
    .eq-b:nth-child(4) { height: 56%; animation-delay: 0.42s; }
    .eq-b:nth-child(5) { height: 84%; animation-delay: 0.58s; }

    @keyframes eq-anim {
      0%, 100% { transform: scaleY(0.25); }
      50%       { transform: scaleY(1); }
    }

    .music-player.paused .eq-b {
      animation-play-state: paused;
    }

    /* ================================================================
       HERO SECTION
    ================================================================ */
    .hero {
      position:        relative;
      min-height:      100vh;
      display:         flex;
      flex-direction:  column;
      align-items:     center;
      justify-content: center;
      text-align:      center;
      padding:         100px 36px 80px;
      overflow:        hidden;
    }

    /* Layered ambient gradient */
    .hero-grad {
      position:       absolute;
      inset:          0;
      background:
        radial-gradient(ellipse 75% 60% at 50% 48%, rgba(201, 168, 76, 0.058), transparent 68%),
        radial-gradient(ellipse 45% 35% at 18% 82%, rgba(201, 168, 76, 0.028), transparent 58%),
        radial-gradient(ellipse 35% 28% at 82% 14%, rgba(201, 168, 76, 0.022), transparent 55%);
      pointer-events: none;
    }

    /* Fine grid overlay */
    .hero-grid {
      position:           absolute;
      inset:              0;
      background-image:
        linear-gradient(rgba(201, 168, 76, 0.022) 1px, transparent 1px),
        linear-gradient(90deg, rgba(201, 168, 76, 0.022) 1px, transparent 1px);
      background-size:    62px 62px;
      mask-image:         radial-gradient(ellipse 85% 85% at 50% 50%, black, transparent 78%);
      -webkit-mask-image: radial-gradient(ellipse 85% 85% at 50% 50%, black, transparent 78%);
      pointer-events:     none;
      transition:         transform 0.4s ease;
    }

    /* Floating ambient orbs */
    .orb {
      position:       absolute;
      border-radius:  50%;
      pointer-events: none;
    }

    .orb-1 {
      width:      340px;
      height:     340px;
      top:        8%;
      right:      -80px;
      background: radial-gradient(circle, rgba(201, 168, 76, 0.04), transparent 72%);
      animation:  orb-drift 14s ease-in-out infinite;
    }

    .orb-2 {
      width:           220px;
      height:          220px;
      bottom:          12%;
      left:            -60px;
      background:      radial-gradient(circle, rgba(201, 168, 76, 0.03), transparent 72%);
      animation:       orb-drift 10s ease-in-out infinite reverse;
      animation-delay: 2s;
    }

    .orb-3 {
      width:           180px;
      height:          180px;
      top:             55%;
      right:           15%;
      background:      radial-gradient(circle, rgba(201, 168, 76, 0.025), transparent 72%);
      animation:       orb-drift 12s ease-in-out infinite;
      animation-delay: 4s;
    }

    @keyframes orb-drift {
      0%, 100% { transform: none; }
      33%       { transform: translateY(-22px) translateX(12px); }
      66%       { transform: translateY(16px)  translateX(-9px); }
    }

    /* Hero text */
    .hero-content {
      position: relative;
      z-index:  10;
    }

    .hero-eyebrow {
      font-family:    var(--font-sans);
      font-size:      9px;
      font-weight:    300;
      letter-spacing: 0.55em;
      text-transform: uppercase;
      color:          var(--gold);
      margin-bottom:  28px;
      opacity:        0;
      animation:      slide-up 1s 0.4s ease forwards;
    }

    @keyframes slide-up {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: none; }
    }

    .hero-title {
      font-family:    var(--font-display);
      font-size:      clamp(44px, 9vw, 96px);
      font-weight:    400;
      letter-spacing: 0.04em;
      color:          var(--cream);
      line-height:    1.05;
      margin-bottom:  20px;
      opacity:        0;
      text-shadow:    0 0 40px rgba(201, 168, 76, 0.3);
      animation:      hero-title-in 1.5s 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }

    @keyframes hero-title-in {
      from {
        opacity:        0;
        transform:      translateY(36px) scaleX(0.96);
        letter-spacing: 0.2em;
      }
      to {
        opacity:        1;
        transform:      none;
        letter-spacing: 0.04em;
      }
    }

    .hero-title em {
      font-style: italic;
      color:      var(--gold-light);
    }

    .hero-sub {
      font-family:    var(--font-body);
      font-size:      clamp(15px, 2.5vw, 19px);
      font-style:     italic;
      font-weight:    300;
      color:          var(--text-muted);
      letter-spacing: 0.06em;
      margin-bottom:  56px;
      opacity:        0;
      animation:      slide-up 1.2s 1s ease forwards;
    }

    /* Gold divider */
    .gold-divider {
      display:   flex;
      align-items: center;
      margin:    0 auto;
      opacity:   0;
      animation: fade-in 1.2s 1.3s ease forwards;
    }

    .gd-hero {
      width:         min(300px, 72vw);
      margin-bottom: 20px;
    }

    .gdl {
      flex:       1;
      height:     1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    .gdg {
      width:      7px;
      height:     7px;
      background: var(--gold);
      transform:  rotate(45deg);
      margin:     0 16px;
      flex-shrink: 0;
      box-shadow: 0 0 12px rgba(201, 168, 76, 0.55);
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    /* Scroll cue */
    .scroll-cue {
      position:        absolute;
      bottom:          36px;
      left:            50%;
      transform:       translateX(-50%);
      display:         flex;
      flex-direction:  column;
      align-items:     center;
      gap:             10px;
      opacity:         0;
      animation:       fade-in 1s 2.2s ease forwards;
      cursor:          pointer;
    }

    .scroll-cue-label {
      font-family:    var(--font-sans);
      font-size:      8px;
      font-weight:    300;
      letter-spacing: 0.45em;
      text-transform: uppercase;
      color:          var(--text-dim);
    }

    .scroll-stem {
      width:      1px;
      height:     40px;
      background: linear-gradient(180deg, var(--gold), transparent);
      animation:  stem-pulse 2.2s ease-in-out infinite;
    }

    @keyframes stem-pulse {
      0%, 100% { opacity: 0.25; transform: scaleY(0.8); }
      50%       { opacity: 0.9;  transform: scaleY(1.1); }
    }

    /* ================================================================
       SHARED SECTION UTILITIES
    ================================================================ */
    .rule {
      width:      100%;
      height:     1px;
      background: linear-gradient(90deg, transparent, rgba(201, 168, 76, 0.18), transparent);
    }

    .section {
      position: relative;
      padding:  100px 36px;
    }

    .container {
      max-width: 920px;
      margin:    0 auto;
    }

    /* ================================================================
       SCROLL REVEAL
    ================================================================ */
    .rv {
      opacity:    0;
      transform:  translateY(44px);
      transition: opacity 0.95s cubic-bezier(0.22, 1, 0.36, 1),
                  transform 0.95s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .rv-l {
      opacity:    0;
      transform:  translateX(-44px);
      transition: opacity 0.95s cubic-bezier(0.22, 1, 0.36, 1),
                  transform 0.95s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .rv-r {
      opacity:    0;
      transform:  translateX(44px);
      transition: opacity 0.95s cubic-bezier(0.22, 1, 0.36, 1),
                  transform 0.95s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .rv-f {
      opacity:    0;
      transition: opacity 1.1s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .rv.in, .rv-l.in, .rv-r.in, .rv-f.in {
      opacity:   1;
      transform: none;
    }

    /* Stagger delays */
    .d1 { transition-delay: 0.08s; }
    .d2 { transition-delay: 0.18s; }
    .d3 { transition-delay: 0.28s; }
    .d4 { transition-delay: 0.40s; }
    .d5 { transition-delay: 0.52s; }
    .d6 { transition-delay: 0.66s; }

    /* ================================================================
       SCROLLING TEXT BAND
    ================================================================ */
    .text-band {
      overflow:     hidden;
      padding:      22px 0;
      border-top:   1px solid var(--border-soft);
      border-bottom: 1px solid var(--border-soft);
      background:   rgba(201, 168, 76, 0.018);
    }

    .text-band-track {
      display:     flex;
      white-space: nowrap;
      animation:   band-roll 28s linear infinite;
      will-change: transform;
    }

    .tbi {
      font-family:    var(--font-display);
      font-size:      11px;
      letter-spacing: 0.42em;
      text-transform: uppercase;
      color:          var(--gold);
      opacity:        0.22;
      padding:        0 64px;
    }

    .tbi::after {
      content:     ' \2736 ';
      margin-left: 60px;
      opacity:     0.4;
    }

    @keyframes band-roll {
      from { transform: translateX(0); }
      to   { transform: translateX(-50%); }
    }

    /* ================================================================
       OPENING QUOTES
    ================================================================ */
    .quote-section {
      background: linear-gradient(180deg, transparent, rgba(22, 20, 16, 0.4) 50%, transparent);
    }

    .quote-block {
      text-align:  center;
      padding:     0 min(64px, 8vw);
      max-width:   780px;
      margin:      0 auto;
    }

    .q-mark {
      font-family:   var(--font-display);
      font-size:     88px;
      line-height:   0.45;
      color:         var(--gold);
      opacity:       0.15;
      display:       block;
      margin-bottom: 28px;
      user-select:   none;
    }

    .q-body {
      font-family: var(--font-body);
      font-size:   clamp(17px, 3.2vw, 23px);
      font-weight: 300;
      font-style:  italic;
      line-height: 1.92;
      color:       var(--text-main);
    }

    .q-body + .q-body {
      margin-top: 26px;
    }

    /* ================================================================
       PHOTO SECTIONS
    ================================================================ */
    .photo-section {
      padding: 90px 40px;
    }

    .photo-row {
      display:               grid;
      grid-template-columns: 1fr 1fr;
      gap:                   56px 88px;
      align-items:           center;
      max-width:             1020px;
      margin:                0 auto;
    }

    .photo-row.rev {
      direction: rtl;
    }

    .photo-row.rev > * {
      direction: ltr;
    }

    .photo-wrap {
      position: relative;
    }

    .photo-frame {
      position:     relative;
      overflow:     hidden;
      aspect-ratio: 4 / 5;
      background:   var(--dark-mid);
    }

    .photo-frame::before {
      content:        '';
      position:       absolute;
      inset:          0;
      border:         1px solid rgba(201, 168, 76, 0.22);
      z-index:        2;
      pointer-events: none;
    }

    .photo-frame::after {
      content:        '';
      position:       absolute;
      inset:          10px;
      border:         1px solid rgba(201, 168, 76, 0.07);
      z-index:        2;
      pointer-events: none;
    }

    .photo-frame img {
      width:      100%;
      height:     100%;
      object-fit: cover;
      display:    block;
      filter:     brightness(0.85) saturate(0.82);
      transition: transform 0.85s cubic-bezier(0.22, 1, 0.36, 1), filter 0.65s;
    }

    .photo-frame:hover img {
      transform: scale(1.045);
      filter:    brightness(0.97) saturate(1.02);
    }

    /* Corner pin ornaments */
    .pin {
      position:       absolute;
      pointer-events: none;
    }

    .pin-tl { top: -8px; left: -8px; width: 22px; height: 22px; border-top: 1.5px solid var(--gold); border-left: 1.5px solid var(--gold); opacity: 0.58; }
    .pin-tr { top: -8px; right: -8px; width: 22px; height: 22px; border-top: 1.5px solid var(--gold); border-right: 1.5px solid var(--gold); opacity: 0.58; }
    .pin-bl { bottom: -8px; left: -8px; width: 22px; height: 22px; border-bottom: 1.5px solid var(--gold); border-left: 1.5px solid var(--gold); opacity: 0.58; }
    .pin-br { bottom: -8px; right: -8px; width: 22px; height: 22px; border-bottom: 1.5px solid var(--gold); border-right: 1.5px solid var(--gold); opacity: 0.58; }

    .pdh {
      position:       absolute;
      bottom:         -24px;
      right:          -24px;
      width:          55%;
      height:         1px;
      background:     linear-gradient(90deg, transparent, var(--gold));
      opacity:        0.22;
      pointer-events: none;
    }

    .pdv {
      position:       absolute;
      top:            -24px;
      right:          -24px;
      width:          1px;
      height:         38%;
      background:     linear-gradient(180deg, var(--gold), transparent);
      opacity:        0.22;
      pointer-events: none;
    }

    .pnum {
      position:        absolute;
      bottom:          -40px;
      left:            0;
      font-family:     var(--font-display);
      font-size:       80px;
      font-weight:     600;
      color:           var(--gold);
      opacity:         0.055;
      line-height:     1;
      letter-spacing:  -0.03em;
      pointer-events:  none;
      user-select:     none;
    }

    /* Caption area */
    .caption {
      padding: 12px 0;
    }

    .cap-idx {
      font-family:    var(--font-display);
      font-size:      10px;
      letter-spacing: 0.32em;
      color:          var(--gold);
      opacity:        0.55;
      margin-bottom:  24px;
    }

    .cap-body {
      font-family:   var(--font-body);
      font-size:     clamp(16px, 2.4vw, 19px);
      font-weight:   300;
      line-height:   2.05;
      color:         var(--text-body);
      margin-bottom: 36px;
    }

    .cap-line {
      width:      36px;
      height:     1px;
      background: var(--gold);
      opacity:    0.38;
      transition: width 0.75s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .in .cap-line {
      width: 82px;
    }

    /* ================================================================
       WISH CARD GRID
    ================================================================ */
    .wish-section {
      padding:    100px 36px;
      background: linear-gradient(180deg, transparent, rgba(20, 18, 14, 0.65) 50%, transparent);
    }

    .sec-eyebrow {
      font-family:    var(--font-sans);
      font-size:      9px;
      font-weight:    300;
      letter-spacing: 0.45em;
      text-transform: uppercase;
      color:          var(--gold);
      opacity:        0.65;
    }

    .wish-grid {
      display:               grid;
      grid-template-columns: 1fr 1fr;
      gap:                   2px;
      border:                1px solid var(--border-soft);
      max-width:             860px;
      margin:                0 auto;
    }

    .wish-card {
      padding:    44px 40px;
      background: rgba(201, 168, 76, 0.018);
      position:   relative;
      overflow:   hidden;
      transition: background var(--t-med);
    }

    .wish-card::before {
      content:    '';
      position:   absolute;
      inset:      0;
      background: radial-gradient(ellipse at 30% 30%, rgba(201, 168, 76, 0.07), transparent 70%);
      opacity:    0;
      transition: opacity var(--t-med);
    }

    .wish-card:hover {
      background: rgba(201, 168, 76, 0.04);
    }

    .wish-card:hover::before {
      opacity: 1;
    }

    .wish-card::after {
      content:    '';
      position:   absolute;
      bottom:     0;
      left:       0;
      width:      100%;
      height:     1px;
      background: linear-gradient(90deg, transparent, rgba(201, 168, 76, 0.12), transparent);
    }

    .wish-roman {
      font-family:    var(--font-display);
      font-size:      10px;
      letter-spacing: 0.32em;
      color:          var(--gold);
      opacity:        0.5;
      margin-bottom:  18px;
      display:        block;
    }

    .wish-text {
      font-family: var(--font-body);
      font-size:   clamp(14px, 2vw, 16px);
      font-style:  italic;
      font-weight: 300;
      line-height: 1.9;
      color:       var(--text-muted);
    }

    /* ================================================================
       STATS ROW
    ================================================================ */
    .stat-row {
      display:         flex;
      justify-content: center;
      align-items:     center;
      padding:         80px 36px;
      border-top:      1px solid var(--border-soft);
      border-bottom:   1px solid var(--border-soft);
    }

    .stat-item {
      text-align: center;
      flex:       1;
      max-width:  240px;
    }

    .stat-fig {
      font-family:    var(--font-display);
      font-size:      clamp(34px, 6.5vw, 60px);
      font-weight:    400;
      color:          var(--gold-light);
      letter-spacing: 0.02em;
      line-height:    1;
      margin-bottom:  10px;
    }

    .stat-desc {
      font-family:    var(--font-sans);
      font-size:      9px;
      font-weight:    300;
      letter-spacing: 0.38em;
      text-transform: uppercase;
      color:          var(--text-dim);
    }

    .stat-vr {
      width:      1px;
      height:     60px;
      background: var(--border-soft);
      flex-shrink: 0;
    }

    /* ================================================================
       PHOTO 3 — VERTICAL LAYOUT
    ================================================================ */
    .photo-hero-section {
      padding: 90px 40px;
    }

    .photo-hero-row {
      display:               grid;
      grid-template-columns: 1fr 1fr;
      gap:                   56px 88px;
      align-items:           center;
      max-width:             1020px;
      margin:                0 auto;
    }

    .photo-hero-wrap {
      position: relative;
    }

    .photo-hero-frame {
      position:     relative;
      overflow:     hidden;
      aspect-ratio: 3 / 4;
      background:   var(--dark-mid);
    }

    .photo-hero-frame::before {
      content:        '';
      position:       absolute;
      inset:          0;
      border:         1px solid rgba(201, 168, 76, 0.25);
      z-index:        2;
      pointer-events: none;
    }

    .photo-hero-frame img {
      width:      100%;
      height:     100%;
      object-fit: cover;
      filter:     brightness(0.83) saturate(0.8);
      transition: transform 1s cubic-bezier(0.22, 1, 0.36, 1), filter 0.7s;
    }

    .photo-hero-frame:hover img {
      transform: scale(1.05);
      filter:    brightness(0.95) saturate(1.02);
    }

    /* ================================================================
       CLOSING SECTION
    ================================================================ */
    .closing-section {
      padding:    120px 36px 160px;
      text-align: center;
      position:   relative;
      overflow:   hidden;
    }

    .closing-bg {
      position:       absolute;
      inset:          0;
      background:     radial-gradient(ellipse 80% 65% at 50% 88%, rgba(201, 168, 76, 0.052), transparent 68%);
      pointer-events: none;
    }

    .closing-inner {
      max-width: 680px;
      margin:    0 auto;
      position:  relative;
      z-index:   10;
    }

    .closing-vline {
      width:      1px;
      height:     64px;
      background: linear-gradient(180deg, transparent, var(--gold), transparent);
      opacity:    0.38;
      margin:     0 auto 52px;
    }

    .closing-title {
      font-family:    var(--font-display);
      font-size:      clamp(30px, 6.5vw, 60px);
      font-weight:    400;
      letter-spacing: 0.06em;
      color:          var(--cream);
      line-height:    1.18;
      margin-bottom:  36px;
    }

    .closing-title em {
      font-style: italic;
      color:      var(--gold-light);
    }

    .closing-para {
      font-family:   var(--font-body);
      font-size:     clamp(15px, 2.4vw, 19px);
      font-style:    italic;
      font-weight:   300;
      line-height:   2;
      color:         var(--text-muted);
      margin-bottom: 56px;
    }

    .flourish-row {
      display:         flex;
      align-items:     center;
      justify-content: center;
      gap:             22px;
      margin-bottom:   40px;
    }

    .flourish-arm {
      width:      64px;
      height:     1px;
      background: linear-gradient(90deg, transparent, var(--gold));
      opacity:    0.38;
    }

    .flourish-arm-r {
      background: linear-gradient(90deg, var(--gold), transparent);
    }

    .flourish-gem {
      font-family:    var(--font-display);
      font-size:      16px;
      color:          var(--gold);
      opacity:        0.45;
      letter-spacing: 0.1em;
    }

    .closing-sig {
      font-family:    var(--font-sans);
      font-size:      9px;
      font-weight:    300;
      letter-spacing: 0.42em;
      text-transform: uppercase;
      color:          var(--text-dim);
    }

    /* ================================================================
       FOOTER
    ================================================================ */
    .site-footer {
      padding:    32px 36px;
      text-align: center;
      border-top: 1px solid var(--border-faint);
    }

    .footer-text {
      font-family:    var(--font-sans);
      font-size:      9px;
      font-weight:    300;
      letter-spacing: 0.38em;
      text-transform: uppercase;
      color:          var(--text-faint);
    }

    /* ================================================================
       SPARKLE ELEMENTS (JS-created)
    ================================================================ */
    .sparkle {
      position:       fixed;
      border-radius:  50%;
      pointer-events: none;
      z-index:        9990;
      background:     var(--gold);
    }

    /* ================================================================
       RESPONSIVE
    ================================================================ */
    @media (max-width: 720px) {
      .photo-row,
      .photo-hero-row {
        grid-template-columns: 1fr;
        gap:                   44px;
      }

      .photo-row.rev { direction: ltr; }

      .photo-frame { aspect-ratio: 4 / 3; }

      .wish-grid { grid-template-columns: 1fr; }

      .stat-row {
        flex-direction: column;
        gap:            40px;
      }

      .stat-vr {
        width:  48px;
        height: 1px;
      }

      .music-player {
        right:   14px;
        bottom:  14px;
        padding: 10px 14px 10px 12px;
        gap:     10px;
      }

      .lock-card {
        padding: 44px 28px 40px;
      }

      .lc {
        width:  48px;
        height: 48px;
      }

      .lc-tl { top: 18px; left: 18px; }
      .lc-tr { top: 18px; right: 18px; }
      .lc-bl { bottom: 18px; left: 18px; }
      .lc-br { bottom: 18px; right: 18px; }

      .section { padding: 70px 24px; }

      .photo-section,
      .photo-hero-section { padding: 70px 24px; }

      .closing-section { padding: 80px 24px 120px; }
    }

    @media (max-width: 480px) {
      .numpad  { gap: 8px; }
      .nb      { padding: 15px 6px; font-size: 20px; }
      .gd-hero { width: 80vw; }
    }

    /* ================================================================
       EXTRA ANIMATION KEYFRAMES (decorative)
    ================================================================ */
    @keyframes pulse-ring {
      0%, 100% { box-shadow: 0 0 10px rgba(201, 168, 76, 0.25); }
      50%       { box-shadow: 0 0 24px rgba(201, 168, 76, 0.55), 0 0 48px rgba(201, 168, 76, 0.18); }
    }

    @keyframes float-y {
      0%, 100% { transform: none; }
      50%       { transform: translateY(-8px); }
    }

    @keyframes text-shimmer {
      0%   { background-position: -200% center; }
      100% { background-position:  200% center; }
    }

    @keyframes slow-rotate {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    @keyframes scale-pulse {
      0%, 100% { transform: scale(1); }
      50%       { transform: scale(1.04); }
    }

    @keyframes shimmer-line {
      0%   { background-position: -100% 0; }
      100% { background-position:  200% 0; }
    }


    /* ================================================================
       ADDITIONAL DECORATIVE ELEMENTS & ANIMATIONS
    ================================================================ */

    /* Shimmer gold text utility */
    .text-shimmer {
      background:              linear-gradient(90deg, var(--gold-darker) 0%, var(--gold-lightest) 40%, var(--gold) 60%, var(--gold-darker) 100%);
      background-size:         200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip:         text;
      animation:               text-shimmer 4.5s linear infinite;
    }

    /* Pulse glow animation for decorative elements */
    @keyframes pulse-glow-anim {
      0%, 100% {
        box-shadow: 0 0 8px rgba(201, 168, 76, 0.2);
      }
      50% {
        box-shadow: 0 0 22px rgba(201, 168, 76, 0.55), 0 0 44px rgba(201, 168, 76, 0.2);
      }
    }

    /* Slow float animation */
    @keyframes slow-float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    /* Scanline overlay for cinematic effect */
    .scanline-overlay {
      position:              fixed;
      inset:                 0;
      pointer-events:        none;
      z-index:               0;
      background-image:      repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.018) 0px,
        rgba(0, 0, 0, 0.018) 1px,
        transparent          1px,
        transparent          3px
      );
      opacity:               0.35;
    }

    /* ---- LOCK CARD MICRO DETAILS ---- */

    /* Small ornament line below the card title */
    .l-title-under {
      display:         block;
      width:           28px;
      height:          1px;
      background:      var(--gold);
      opacity:         0.35;
      margin:          0 auto 32px;
      animation:       slide-down 1.4s 0.5s both;
    }

    /* Fine grid texture behind numpad area */
    .numpad-bg {
      position:         absolute;
      inset:            0;
      background-image:
        linear-gradient(rgba(201, 168, 76, 0.015) 1px, transparent 1px),
        linear-gradient(90deg, rgba(201, 168, 76, 0.015) 1px, transparent 1px);
      background-size:  20px 20px;
      pointer-events:   none;
      opacity:          0.6;
    }

    /* ---- HERO EXTRAS ---- */

    /* Large ghost text behind hero */
    .hero-ghost-text {
      position:       absolute;
      bottom:         -20px;
      left:           50%;
      transform:      translateX(-50%);
      font-family:    var(--font-display);
      font-size:      clamp(80px, 18vw, 180px);
      font-weight:    600;
      letter-spacing: 0.02em;
      color:          var(--gold);
      opacity:        0.025;
      white-space:    nowrap;
      user-select:    none;
      pointer-events: none;
      line-height:    1;
    }

    /* ---- SECTION DIVIDER ORNAMENT ---- */

    /* Diamond-centered section divider */
    .ornament-divider {
      display:         flex;
      align-items:     center;
      justify-content: center;
      gap:             18px;
      padding:         40px 0;
    }

    .ornament-divider-line {
      flex:       1;
      max-width:  200px;
      height:     1px;
      background: linear-gradient(90deg, transparent, rgba(201, 168, 76, 0.22));
    }

    .ornament-divider-line-r {
      background: linear-gradient(90deg, rgba(201, 168, 76, 0.22), transparent);
    }

    .ornament-divider-center {
      font-family:    var(--font-display);
      font-size:      10px;
      letter-spacing: 0.4em;
      color:          var(--gold);
      opacity:        0.35;
    }

    /* ---- PHOTO OVERLAY GRADIENT ---- */

    /* Subtle gradient overlay at bottom of photos */
    .photo-frame .photo-gradient-overlay {
      position:       absolute;
      bottom:         0;
      left:           0;
      right:          0;
      height:         40%;
      background:     linear-gradient(180deg, transparent, rgba(8, 8, 6, 0.3));
      z-index:        1;
      pointer-events: none;
    }

    /* ---- QUOTE SECTION EXTRAS ---- */

    /* Decorative left border on quote block */
    .quote-border-left {
      border-left: 1px solid rgba(201, 168, 76, 0.2);
      padding-left: 32px;
      text-align:   left;
    }

    /* ---- CLOSING SECTION EXTRAS ---- */

    /* Subtle star-like ornaments */
    .star-ornament {
      display:    inline-block;
      font-family: var(--font-display);
      font-size:  14px;
      color:      var(--gold);
      opacity:    0.35;
      letter-spacing: 6px;
      margin-bottom: 24px;
    }

    /* Thin line above closing sig */
    .sig-line {
      width:      48px;
      height:     1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      opacity:    0.25;
      margin:     0 auto 28px;
    }

    /* ---- BOTTOM SCROLLING BAND (reverse direction) ---- */

    .text-band-reverse .text-band-track {
      animation-direction: reverse;
    }

    /* ---- GLASS CARD COMPONENT ---- */

    .glass-card {
      background:           rgba(22, 20, 16, 0.6);
      border:               1px solid var(--border-soft);
      backdrop-filter:      blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    /* ---- TOOLTIP STYLE MICROCARD ---- */

    .micro-label {
      display:        inline-block;
      font-family:    var(--font-sans);
      font-size:      8px;
      font-weight:    300;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color:          var(--gold);
      opacity:        0.5;
      border:         1px solid rgba(201, 168, 76, 0.15);
      padding:        4px 10px;
    }

    /* ---- WISH CARD HOVER GLOW BORDER ---- */

    .wish-card-glow {
      position:       absolute;
      inset:          -1px;
      border:         1px solid transparent;
      pointer-events: none;
      transition:     border-color 0.4s ease;
    }

    .wish-card:hover .wish-card-glow {
      border-color: rgba(201, 168, 76, 0.15);
    }

    /* ---- PARALLAX LAYERS ---- */

    .parallax-slow {
      will-change: transform;
    }

    .parallax-med {
      will-change: transform;
    }

    /* ---- STAGGER FADE-IN for repeated items ---- */

    .stagger-item {
      opacity:   0;
      transform: translateY(20px);
    }

    .stagger-item.ready {
      transition: opacity 0.7s ease, transform 0.7s ease;
      opacity:    1;
      transform:  none;
    }

    /* ---- GOLD LETTER SPACING ANIMATION ---- */

    @keyframes letters-expand {
      from { letter-spacing: 0.02em; }
      to   { letter-spacing: 0.12em; }
    }

    /* ---- BORDER PULSE FOR LOCK CARD ---- */

    @keyframes border-glow-pulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(201, 168, 76, 0);
        border-color: rgba(201, 168, 76, 0.18);
      }
      50% {
        box-shadow: inset 0 0 30px rgba(201, 168, 76, 0.04), 0 0 40px rgba(201, 168, 76, 0.06);
        border-color: rgba(201, 168, 76, 0.28);
      }
    }

    .lock-card {
      animation: card-appear 1.3s cubic-bezier(0.22, 1, 0.36, 1) both,
                 border-glow-pulse 6s ease-in-out 1.5s infinite;
    }

    /* ---- NUMBER HOVER GLOW ON NUMPAD ---- */

    .nb-number-glow {
      position:   absolute;
      inset:      0;
      opacity:    0;
      background: radial-gradient(circle at 50% 50%, rgba(201, 168, 76, 0.1), transparent 65%);
      transition: opacity 0.3s ease;
    }

    .nb:hover .nb-number-glow {
      opacity: 1;
    }

    /* ---- EXTENDED RESPONSIVE BREAKPOINTS ---- */

    @media (min-width: 1400px) {
      .container {
        max-width: 1040px;
      }

      .photo-row {
        max-width: 1100px;
        gap:       64px 100px;
      }

      .photo-hero-row {
        max-width: 1100px;
        gap:       64px 100px;
      }

      .wish-grid {
        max-width: 940px;
      }

      .closing-inner {
        max-width: 740px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration:        0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration:       0.01ms !important;
      }
    }

    /* ---- PRINT STYLES ---- */

    @media print {
      .music-player,
      .progress-bar,
      #particles-canvas,
      .noise-layer,
      .vignette-layer,
      .cursor-glow,
      .scroll-cue {
        display: none !important;
      }

      body {
        background: white;
        color:      black;
      }
    }

    /* ---- HIGH CONTRAST MODE SUPPORT ---- */

    @media (forced-colors: active) {
      .dot {
        border-color: ButtonText;
      }

      .dot.on {
        background:   ButtonText;
        border-color: ButtonText;
      }
    }

    /* ---- ANIMATION UTILITY CLASSES ---- */

    .animate-float {
      animation: slow-float 5s ease-in-out infinite;
    }

    .animate-pulse {
      animation: pulse-glow-anim 3s ease-in-out infinite;
    }

    .animate-spin-slow {
      animation: slow-rotate 30s linear infinite;
    }

    .animate-shimmer {
      animation: text-shimmer 4s linear infinite;
    }

    /* ---- GOLD UNDERLINE LINK STYLE ---- */

    .gold-link {
      color:                  var(--gold-light);
      text-decoration:        none;
      border-bottom:          1px solid rgba(201, 168, 76, 0.3);
      padding-bottom:         1px;
      transition:             border-color 0.3s, color 0.3s;
    }

    .gold-link:hover {
      color:        var(--gold-lightest);
      border-color: var(--gold);
    }

    /* ---- SECTION TRANSITION SEPARATOR ---- */

    .section-sep {
      padding:    48px 36px;
      display:    flex;
      align-items: center;
      justify-content: center;
    }

    .section-sep-inner {
      display:         flex;
      align-items:     center;
      justify-content: center;
      gap:             20px;
      opacity:         0.25;
    }

    .section-sep-line {
      width:      80px;
      height:     1px;
      background: linear-gradient(90deg, transparent, var(--gold));
    }

    .section-sep-line-r {
      background: linear-gradient(90deg, var(--gold), transparent);
    }

    .section-sep-dot {
      width:         4px;
      height:        4px;
      border-radius: 50%;
      background:    var(--gold);
    }

    /* ---- CAPTION INDEX COUNTER STYLE ---- */

    .cap-idx-num {
      font-family:    var(--font-display);
      font-size:      64px;
      font-weight:    600;
      color:          var(--gold);
      opacity:        0.07;
      line-height:    1;
      position:       absolute;
      top:            -10px;
      left:           -20px;
      letter-spacing: -0.04em;
      pointer-events: none;
      user-select:    none;
    }

    /* ---- CLOSING SECTION — ANIMATED STAR FIELD ---- */

    .star-field {
      position:       absolute;
      inset:          0;
      pointer-events: none;
      overflow:       hidden;
    }

    .star-dot {
      position:         absolute;
      width:            1px;
      height:           1px;
      border-radius:    50%;
      background:       var(--gold);
      animation:        star-twinkle 3s ease-in-out infinite;
    }

    @keyframes star-twinkle {
      0%, 100% { opacity: 0.05; transform: scale(1);    }
      50%       { opacity: 0.3;  transform: scale(1.8); }
    }

    /* ---- BOTTOM BAND (REVERSE) ---- */

    .text-band-bottom {
      overflow:      hidden;
      padding:       18px 0;
      border-top:    1px solid var(--border-faint);
      border-bottom: 1px solid var(--border-faint);
      background:    transparent;
    }

    .text-band-bottom .text-band-track {
      animation-direction: reverse;
      animation-duration:  35s;
    }

    .text-band-bottom .tbi {
      opacity: 0.12;
    }

    /* ---- WISH CARD TOP ACCENT ---- */

    .wish-card-accent {
      display:         block;
      width:           0;
      height:          1px;
      background:      var(--gold);
      opacity:         0;
      margin-bottom:   0;
      transition:      width 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.4s;
      position:        absolute;
      top:             0;
      left:            0;
    }

    .wish-card:hover .wish-card-accent {
      width:   100%;
      opacity: 0.18;
    }

    /* ---- CAPTION OVERLAY ---- */

    .caption-overlay-text {
      font-family:    var(--font-display);
      font-size:      8px;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color:          var(--gold);
      opacity:        0.4;
      margin-bottom:  12px;
    }

    /* ---- ELEGANT FOCUS STYLES ---- */

    :focus-visible {
      outline:        2px solid rgba(201, 168, 76, 0.5);
      outline-offset: 3px;
    }

    /* ---- SCROLLBAR FOR PAGE 2 SPECIFIC ---- */

    #page-birthday {
      scrollbar-gutter: stable;
    }

    /* ---- TEXT SELECTION COLOR LOCK PAGE ---- */

    #page-lock ::selection {
      background: rgba(201, 168, 76, 0.2);
      color:      var(--cream-dim);
    }

    /* ---- CAPTION LINE ANIMATED REVEAL ---- */

    .cap-line.in {
      width: 82px;
    }

    /* Ensure transition applies */
    .rv-r .cap-line,
    .rv-l .cap-line {
      transition: width 0.75s cubic-bezier(0.22, 1, 0.36, 1) 0.5s;
    }

  </style>
</head>
<body>

  <!-- Global persistent layers -->
  <canvas id="particles-canvas"></canvas>
  <div class="noise-layer"    aria-hidden="true"></div>
  <div class="vignette-layer" aria-hidden="true"></div>
  <div class="cursor-glow"    id="cursor-glow" aria-hidden="true"></div>
  <div class="page-fade"      id="page-fade"></div>
  <div class="progress-bar"   id="progress-bar"></div>

  <!-- ============================================================
       PAGE 1 — PASSWORD / LOCK
  ============================================================ -->
  <main id="page-lock" class="page active">

    <div class="lock-ambient" aria-hidden="true"></div>
    <div class="lock-ring lock-ring-a" aria-hidden="true"></div>
    <div class="lock-ring lock-ring-b" aria-hidden="true"></div>

    <div class="lc lc-tl" aria-hidden="true"></div>
    <div class="lc lc-tr" aria-hidden="true"></div>
    <div class="lc lc-bl" aria-hidden="true"></div>
    <div class="lc lc-br" aria-hidden="true"></div>

    <div class="lhl lhl-t" aria-hidden="true"></div>
    <div class="lhl lhl-b" aria-hidden="true"></div>

    <article class="lock-card" id="lock-card">

      <p class="l-eyebrow">Private Access</p>
      <h1 class="l-title">Selamat Datang</h1>
      <p class="l-sub">Masukkan kode untuk melanjutkan</p>

      <div class="l-divider" aria-hidden="true">
        <div class="l-dline l-dline-l"></div>
        <div class="l-gem"></div>
        <div class="l-dline l-dline-r"></div>
      </div>

      <div class="code-dots" role="status" aria-label="Indikator kode">
        <div class="dot" id="d0" aria-hidden="true"></div>
        <div class="dot" id="d1" aria-hidden="true"></div>
        <div class="dot" id="d2" aria-hidden="true"></div>
        <div class="dot" id="d3" aria-hidden="true"></div>
      </div>

      <div class="numpad" role="group" aria-label="Papan angka">
        <button class="nb" data-n="1" aria-label="1">1</button>
        <button class="nb" data-n="2" aria-label="2">2</button>
        <button class="nb" data-n="3" aria-label="3">3</button>
        <button class="nb" data-n="4" aria-label="4">4</button>
        <button class="nb" data-n="5" aria-label="5">5</button>
        <button class="nb" data-n="6" aria-label="6">6</button>
        <button class="nb" data-n="7" aria-label="7">7</button>
        <button class="nb" data-n="8" aria-label="8">8</button>
        <button class="nb" data-n="9" aria-label="9">9</button>
        <button class="nb nb-wide" data-n="0" aria-label="0">0</button>
        <button class="nb nb-del" data-del="1" aria-label="Hapus">hapus</button>
      </div>

      <p class="l-err" id="l-err" role="alert" aria-live="polite">
        Kode tidak valid. Silakan coba lagi.
      </p>

    </article>
  </main>

  <!-- ============================================================
       PAGE 2 — BIRTHDAY
  ============================================================ -->
  <div id="page-birthday" class="page">

    <audio id="bg-audio" loop preload="auto">
      <source src="mine all mine.mp3" type="audio/mpeg"/>
    </audio>

    <!-- Music Player -->
    <div class="music-player paused" id="music-player" role="region" aria-label="Pemutar musik">
      <button class="m-btn" id="m-btn" aria-label="Play atau Pause musik">
        <svg class="icon-pause" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="1.5">
          <line x1="6"  y1="4" x2="6"  y2="20"/>
          <line x1="18" y1="4" x2="18" y2="20"/>
        </svg>
        <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor">
          <polygon points="5,3 19,12 5,21"/>
        </svg>
      </button>
      <div class="m-info">
        <span class="m-label">Now Playing</span>
        <span class="m-track">Mine All Mine</span>
      </div>
      <div class="eq" aria-hidden="true">
        <div class="eq-b"></div>
        <div class="eq-b"></div>
        <div class="eq-b"></div>
        <div class="eq-b"></div>
        <div class="eq-b"></div>
      </div>
    </div>

    <!-- HERO -->
    <section class="hero" aria-label="Hero">
      <div class="hero-grad" aria-hidden="true"></div>
      <div class="hero-grid" id="hero-grid" aria-hidden="true"></div>
      <div class="orb orb-1" aria-hidden="true"></div>
      <div class="orb orb-2" aria-hidden="true"></div>
      <div class="orb orb-3" aria-hidden="true"></div>

      <div class="hero-content">
        <p class="hero-eyebrow">Hari yang Istimewa</p>
        <h1 class="hero-title">Happy <em>Birthday</em></h1>
        <p class="hero-sub">Sebuah perayaan kecil, untukmu</p>
        <div class="gold-divider gd-hero" aria-hidden="true">
          <div class="gdl"></div>
          <div class="gdg"></div>
          <div class="gdl"></div>
        </div>
      </div>

      <div class="scroll-cue" id="scroll-cue" role="button" tabindex="0" aria-label="Scroll ke bawah">
        <span class="scroll-cue-label">Scroll</span>
        <div  class="scroll-stem" aria-hidden="true"></div>
      </div>
    </section>

    <!-- TEXT BAND -->
    <div class="text-band rv" aria-hidden="true">
      <div class="text-band-track">
        <span class="tbi">Happy Birthday</span>
        <span class="tbi">Selamat Ulang Tahun</span>
        <span class="tbi">Happy Birthday</span>
        <span class="tbi">Selamat Ulang Tahun</span>
        <span class="tbi">Happy Birthday</span>
        <span class="tbi">Selamat Ulang Tahun</span>
        <span class="tbi">Happy Birthday</span>
        <span class="tbi">Selamat Ulang Tahun</span>
        <span class="tbi">Happy Birthday</span>
        <span class="tbi">Selamat Ulang Tahun</span>
      </div>
    </div>

    <!-- OPENING QUOTE -->
    <section class="section quote-section" aria-label="Kutipan pembuka">
      <div class="container">
        <div class="quote-block">
          <span class="q-mark rv d1" aria-hidden="true">"</span>
          <p class="q-body rv d2">
            hari ini bukan cuma soal nambah umur, tapi soal nambah cerita juga.
            udah banyak hal yang kamu lewatin sampe bisa ada di titik sekarang.
            mungkin ga semuanya gampang, mungkin juga ada fase capek yang ga semua orang liat,
            tapi kamu tetep jalan sampe hari ini.
          </p>
          <p class="q-body rv d3" style="margin-top: 28px; color: var(--text-muted);">
            itu aja sebenernya udah jadi bukti kalo kamu lebih kuat dari yang kamu kira.
          </p>
        </div>
      </div>
    </section>

    <!-- QUOTE 2 -->
    <section class="section" style="padding-top: 0;">
      <div class="container">
        <div class="quote-block">
          <p class="q-body rv d2" style="font-size: clamp(15px, 2.4vw, 19px); color: var(--text-muted);">
            di umur yang sekarang, aku cuma berharap kamu bisa jalan lebih tenang
            tanpa harus ngerasa dikejar apa apa. nikmatin prosesnya, nikmatin waktunya,
            dan jangan lupa kalo kamu juga berhak istirahat tanpa ngerasa bersalah.
            ga semua hal harus buru buru, kadang yang pelan justru lebih tahan lama.
          </p>
        </div>
      </div>
    </section>

    <div class="rule rv" aria-hidden="true"></div>

    <!-- PHOTO 1 -->
    <section class="photo-section" aria-label="Foto pertama">
      <div class="photo-row">
        <div class="photo-wrap rv-l">
          <div class="photo-frame" id="frame-1">
            <img src="bday1.jpeg" alt="Foto 1" loading="lazy" decoding="async"/>
          </div>
          <div class="pin pin-tl"></div>
          <div class="pin pin-tr"></div>
          <div class="pin pin-bl"></div>
          <div class="pin pin-br"></div>
          <div class="pdh"></div>
          <div class="pdv"></div>
          <div class="pnum" aria-hidden="true">01</div>
        </div>
        <div class="caption rv-r d2">
          <p class="cap-idx">&#8212; 01</p>
          <p class="cap-body">
            aku harap di tahun ini kamu lebih sering ngerasain hal hal baik,
            sekecil apapun itu. entah itu ketawa yang tulus, kabar yang nenangin,
            atau momen simpel yang bikin kamu ngerasa cukup. karena kadang bahagia
            ga selalu dateng dari hal besar, tapi dari hal kecil yang pas waktunya.
          </p>
          <div class="cap-line rv d3"></div>
        </div>
      </div>
    </section>

    <div class="rule rv" aria-hidden="true"></div>

    <!-- PHOTO 2 -->
    <section class="photo-section" aria-label="Foto kedua">
      <div class="photo-row rev">
        <div class="photo-wrap rv-r">
          <div class="photo-frame" id="frame-2">
            <img src="bday2.jpeg" alt="Foto 2" loading="lazy" decoding="async"/>
          </div>
          <div class="pin pin-tl"></div>
          <div class="pin pin-tr"></div>
          <div class="pin pin-bl"></div>
          <div class="pin pin-br"></div>
          <div class="pdh" style="right: auto; left: -24px; background: linear-gradient(90deg, var(--gold), transparent);"></div>
          <div class="pdv" style="right: auto; left: -24px;"></div>
          <div class="pnum" style="left: auto; right: 0;" aria-hidden="true">02</div>
        </div>
        <div class="caption rv-l d2">
          <p class="cap-idx">&#8212; 02</p>
          <p class="cap-body">
            semoga juga apa yang lagi kamu kejar sekarang bisa pelan pelan nemuin jalannya.
            ga harus langsung berhasil, yang penting kamu ga berhenti. kalo pun nanti
            ada capeknya, inget aja kamu ga sendirian ngelewatin semuanya.
          </p>
          <div class="cap-line rv d3"></div>
        </div>
      </div>
    </section>

    <div class="rule rv" aria-hidden="true"></div>

    <!-- WISH CARDS -->
    <section class="wish-section" aria-label="Kartu harapan">
      <div class="container">
        <span class="sec-eyebrow rv" style="display: block; text-align: center; margin-bottom: 52px;">Harapan</span>
        <div class="wish-grid">
          <div class="wish-card rv d1">
            <span class="wish-roman">I.</span>
            <p class="wish-text">semoga langkah kamu ke depan lebih ringan dari sebelumnya</p>
          </div>
          <div class="wish-card rv d2">
            <span class="wish-roman">II.</span>
            <p class="wish-text">harapan kamu satu satu nemu jawabannya di waktu yang tepat</p>
          </div>
          <div class="wish-card rv d3">
            <span class="wish-roman">III.</span>
            <p class="wish-text">hati kamu tetep hangat walaupun dunia kadang ga selalu ramah</p>
          </div>
          <div class="wish-card rv d4">
            <span class="wish-roman">IV.</span>
            <p class="wish-text">hari ini milik kamu, nikmatin dengan cara yang paling bikin kamu nyaman</p>
          </div>
        </div>
      </div>
    </section>

    <div class="rule rv" aria-hidden="true"></div>

    <!-- PHOTO 3 -->
    <section class="photo-hero-section" aria-label="Foto ketiga">
      <div class="photo-hero-row">
        <div class="photo-hero-wrap rv-l">
          <div class="photo-hero-frame" id="frame-3">
            <img src="bday3.jpeg" alt="Foto 3" loading="lazy" decoding="async"/>
          </div>
          <div class="pin pin-tl"></div>
          <div class="pin pin-tr"></div>
          <div class="pin pin-bl"></div>
          <div class="pin pin-br"></div>
          <div class="pnum" style="left: 0; bottom: -44px;" aria-hidden="true">03</div>
        </div>
        <div class="caption rv-r d3">
          <p class="cap-idx">&#8212; 03</p>
          <p class="cap-body">
            terakhir, makasih udah jadi diri kamu yang sekarang. tanpa harus jadi orang lain,
            tanpa harus maksa jadi sempurna. cukup jadi kamu yang terus belajar,
            terus jalan, dan terus tumbuh.
          </p>
          <div class="cap-line rv d4"></div>
        </div>
      </div>
    </section>

    <!-- STATS -->
    <div class="stat-row" aria-label="Statistik">
      <div class="stat-item rv d1">
        <div class="stat-fig" id="stat-yr">&#8212;</div>
        <div class="stat-desc">Tahun Berjalan</div>
      </div>
      <div class="stat-vr rv d2" aria-hidden="true"></div>
      <div class="stat-item rv d3">
        <div class="stat-fig">&#8734;</div>
        <div class="stat-desc">Cerita Tersimpan</div>
      </div>
      <div class="stat-vr rv d4" aria-hidden="true"></div>
      <div class="stat-item rv d5">
        <div class="stat-fig">1</div>
        <div class="stat-desc">Hari Spesial</div>
      </div>
    </div>

    <!-- CLOSING -->
    <section class="closing-section" aria-label="Penutup">
      <div class="closing-bg" aria-hidden="true"></div>
      <div class="closing-inner">
        <div class="closing-vline rv"    aria-hidden="true"></div>
        <h2  class="closing-title rv d2">Selamat Ulang<br/><em>Tahun</em></h2>
        <p   class="closing-para rv d3">
          selamat ulang tahun ya. semoga langkah kamu ke depan lebih ringan,
          harapan kamu satu satu nemu jawabannya, dan hati kamu tetep hangat
          walaupun dunia kadang ga selalu ramah.
        </p>
        <div class="flourish-row rv d4" aria-hidden="true">
          <div class="flourish-arm"></div>
          <span class="flourish-gem">&#10022;</span>
          <div class="flourish-arm flourish-arm-r"></div>
        </div>
        <p class="closing-sig rv d5">with love &mdash; always</p>
      </div>
    </section>

    <footer class="site-footer rv" role="contentinfo">
      <p class="footer-text">Made with love &nbsp;&middot;&nbsp; for you</p>
    </footer>

  </div><!-- end #page-birthday -->

  <!-- ============================================================
       JAVASCRIPT
  ============================================================ -->
  <script>
  "use strict";

  /* ============================================================
     A. UTILITY FUNCTIONS
  ============================================================ */

  const SECRET = '2612';

  /** Query helper — single element */
  function qs(selector, context) {
    return (context || document).querySelector(selector);
  }

  /** Query helper — all elements as array */
  function qsa(selector, context) {
    return Array.from((context || document).querySelectorAll(selector));
  }

  /** Clamp a value between min and max */
  function clamp(val, min, max) {
    return Math.min(Math.max(val, min), max);
  }

  /** Linear interpolation */
  function lerp(a, b, t) {
    return a + (b - a) * t;
  }

  /** Random float in [min, max] */
  function randF(min, max) {
    return min + Math.random() * (max - min);
  }

  /** Random integer in [min, max] inclusive */
  function randI(min, max) {
    return Math.floor(randF(min, max + 1));
  }

  /** Promise-based delay */
  function wait(ms) {
    return new Promise(function(resolve) { setTimeout(resolve, ms); });
  }

  /* ============================================================
     B. PARTICLE SYSTEM
  ============================================================ */
  (function initParticles() {

    var canvas = qs('#particles-canvas');
    if (!canvas) return;

    var ctx = canvas.getContext('2d');
    var W, H, particles = [];

    /** Resize canvas to match viewport */
    function resize() {
      W = canvas.width  = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }

    /** Create a single particle with randomised properties */
    function createParticle() {
      return {
        x:           randF(0, W),
        y:           randF(0, H),
        radius:      randF(0.35, 1.9),
        baseAlpha:   randF(0.04, 0.28),
        vx:          randF(-0.14, 0.14),
        vy:          randF(-0.22, -0.04),
        phase:       randF(0, Math.PI * 2),
        phaseSpeed:  randF(0.007, 0.026),
        isGold:      Math.random() > 0.42,
      };
    }

    /** Initialise the particle pool */
    function init() {
      resize();
      var count = clamp(Math.floor(W * H / 8500), 60, 160);
      particles  = [];
      for (var i = 0; i < count; i++) {
        particles.push(createParticle());
      }
    }

    /** Render one frame of the particle animation */
    function render() {
      ctx.clearRect(0, 0, W, H);

      for (var i = 0; i < particles.length; i++) {
        var p = particles[i];

        /* Pulse the alpha using a sine wave */
        p.phase += p.phaseSpeed;
        var a = p.baseAlpha * (0.45 + 0.55 * Math.sin(p.phase));

        /* Draw the particle */
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = p.isGold
          ? 'rgba(201,168,76,' + a + ')'
          : 'rgba(220,205,175,' + (a * 0.55) + ')';
        ctx.fill();

        /* Move the particle */
        p.x += p.vx;
        p.y += p.vy;

        /* Wrap around edges */
        if (p.y < -4)    p.y = H + 4;
        if (p.x < -4)    p.x = W + 4;
        if (p.x > W + 4) p.x = -4;
      }

      requestAnimationFrame(render);
    }

    /* Debounced resize handler */
    var resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(resize, 180);
    });

    init();
    render();

  })(); /* end initParticles */

  /* ============================================================
     C. PASSWORD / LOCK SCREEN
  ============================================================ */
  (function initLock() {

    var MAX_LENGTH = 4;
    var inputBuffer = '';

    var cardEl   = qs('#lock-card');
    var errorEl  = qs('#l-err');
    var fadeEl   = qs('#page-fade');
    var dotEls   = [
      qs('#d0'),
      qs('#d1'),
      qs('#d2'),
      qs('#d3'),
    ];

    /* ---- Dot state helpers ---- */

    function activateDot(index) {
      dotEls[index].classList.add('on');
    }

    function deactivateDot(index) {
      var dot = dotEls[index];
      dot.classList.remove('on');
      dot.style.background  = '';
      dot.style.borderColor = '';
      dot.style.boxShadow   = '';
    }

    function resetAllDots() {
      for (var i = 0; i < dotEls.length; i++) {
        deactivateDot(i);
      }
    }

    function tintDots(bg, border, shadow) {
      for (var i = 0; i < dotEls.length; i++) {
        dotEls[i].style.background  = bg;
        dotEls[i].style.borderColor = border;
        dotEls[i].style.boxShadow   = shadow;
      }
    }

    /* ---- Input buffer manipulation ---- */

    function pushDigit(digit) {
      if (inputBuffer.length >= MAX_LENGTH) return;
      inputBuffer += digit;
      activateDot(inputBuffer.length - 1);
      hideError();
      if (inputBuffer.length === MAX_LENGTH) {
        setTimeout(evaluate, 200);
      }
    }

    function popDigit() {
      if (!inputBuffer.length) return;
      deactivateDot(inputBuffer.length - 1);
      inputBuffer = inputBuffer.slice(0, -1);
      hideError();
    }

    /* ---- Validation ---- */

    function evaluate() {
      if (inputBuffer === SECRET) {
        handleSuccess();
      } else {
        handleFailure();
      }
    }

    /* ---- Success sequence ---- */

    async function handleSuccess() {
      /* Flash dots in success gold */
      tintDots(
        'var(--gold-light)',
        'var(--gold-light)',
        '0 0 20px rgba(232,201,122,0.75)'
      );

      await wait(560);

      /* Fade to black */
      fadeEl.classList.add('on');

      await wait(700);

      /* Switch visible page */
      qs('#page-lock').classList.remove('active');
      qs('#page-birthday').classList.add('active');
      window.scrollTo(0, 0);

      await wait(720);

      /* Fade in birthday page */
      fadeEl.classList.remove('on');

      /* Start all birthday page features */
      initBirthdayPage();
    }

    /* ---- Failure sequence ---- */

    async function handleFailure() {
      /* Flash dots red */
      tintDots(
        'rgba(192, 96, 76, 0.6)',
        'rgba(192, 96, 76, 0.85)',
        '0 0 12px rgba(192, 96, 76, 0.45)'
      );

      /* Shake card */
      cardEl.classList.add('card-shake');
      showError();

      await wait(1200);

      /* Reset everything */
      cardEl.classList.remove('card-shake');
      inputBuffer = '';
      resetAllDots();
      hideError();
    }

    /* ---- UI helpers ---- */

    function showError() {
      errorEl.classList.add('show');
    }

    function hideError() {
      errorEl.classList.remove('show');
    }

    /* ---- Ripple effect on numpad buttons ---- */

    function spawnRipple(event, buttonEl) {
      var ripple = document.createElement('span');
      var rect   = buttonEl.getBoundingClientRect();
      var size   = Math.max(rect.width, rect.height);

      ripple.className = 'ripple';
      ripple.style.width  = size + 'px';
      ripple.style.height = size + 'px';
      ripple.style.left   = (event.clientX - rect.left  - size / 2) + 'px';
      ripple.style.top    = (event.clientY - rect.top   - size / 2) + 'px';

      buttonEl.appendChild(ripple);
      ripple.addEventListener('animationend', function() {
        ripple.remove();
      });
    }

    /* ---- Wire up numpad buttons ---- */

    qsa('.nb[data-n]').forEach(function(btn) {
      btn.addEventListener('click', function(e) {
        spawnRipple(e, this);
        pushDigit(this.dataset.n);
      });
      /* Prevent double-tap zoom on mobile */
      btn.addEventListener('touchend', function(e) {
        e.preventDefault();
      });
    });

    qsa('.nb[data-del]').forEach(function(btn) {
      btn.addEventListener('click', function(e) {
        spawnRipple(e, this);
        popDigit();
      });
      btn.addEventListener('touchend', function(e) {
        e.preventDefault();
      });
    });

    /* ---- Physical keyboard support ---- */

    document.addEventListener('keydown', function(e) {
      if (!qs('#page-lock').classList.contains('active')) return;

      if (e.key >= '0' && e.key <= '9') {
        pushDigit(e.key);
      } else if (e.key === 'Backspace') {
        e.preventDefault();
        popDigit();
      }
    });

  })(); /* end initLock */

  /* ============================================================
     D. BIRTHDAY PAGE INITIALISER
     (called after successful unlock)
  ============================================================ */
  function initBirthdayPage() {

    /* Update the stat year display */
    var statEl = qs('#stat-yr');
    if (statEl) {
      statEl.textContent = String(new Date().getFullYear()).slice(-2);
    }

    /* Show the music player after a brief delay */
    setTimeout(function() {
      var playerEl = qs('#music-player');
      if (playerEl) playerEl.classList.add('visible');
    }, 1100);

    /* Initialise all birthday page subsystems */
    initScrollReveal();
    initScrollProgress();
    initMusicPlayer();
    initHeroParallax();
    initPhotoTilt();
    initScrollCue();
    initClickSparkles();
    initCursorGlow();

    /* Attempt to auto-play the background audio */
    var audio = qs('#bg-audio');
    if (audio) {
      audio.volume = 0.62;
      audio.play().then(function() {
        var playerEl = qs('#music-player');
        if (playerEl) playerEl.classList.remove('paused');
      }).catch(function() {
        /* Auto-play was blocked; music-player already shows the play button */
      });
    }
  }

  /* ============================================================
     E. SCROLL REVEAL (IntersectionObserver)
  ============================================================ */
  function initScrollReveal() {

    var birthdayPage = qs('#page-birthday');
    if (!birthdayPage) return;

    var targets = qsa('.rv, .rv-l, .rv-r, .rv-f', birthdayPage);

    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add('in');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold:   0.1,
      rootMargin: '0px 0px -55px 0px',
    });

    targets.forEach(function(el) {
      observer.observe(el);
    });

  }

  /* ============================================================
     F. SCROLL PROGRESS BAR
  ============================================================ */
  function initScrollProgress() {

    var barEl = qs('#progress-bar');
    if (!barEl) return;

    function updateBar() {
      var total    = document.body.scrollHeight - window.innerHeight;
      var progress = total > 0 ? clamp(window.scrollY / total, 0, 1) * 100 : 0;
      barEl.style.width = progress + '%';
    }

    window.addEventListener('scroll', updateBar, { passive: true });
    updateBar();

  }

  /* ============================================================
     G. MUSIC PLAYER CONTROLS
  ============================================================ */
  function initMusicPlayer() {

    var playerEl = qs('#music-player');
    var audioEl  = qs('#bg-audio');
    var btnEl    = qs('#m-btn');

    if (!playerEl || !audioEl || !btnEl) return;

    btnEl.addEventListener('click', function() {
      if (audioEl.paused) {
        audioEl.play().then(function() {
          playerEl.classList.remove('paused');
        }).catch(function(err) {
          console.warn('Audio play error:', err);
        });
      } else {
        audioEl.pause();
        playerEl.classList.add('paused');
      }
    });

  }

  /* ============================================================
     H. HERO GRID PARALLAX ON MOUSE MOVE
  ============================================================ */
  function initHeroParallax() {

    /* Skip on touch/coarse pointer devices */
    if (window.matchMedia('(pointer: coarse)').matches) return;

    var gradEl = qs('.hero-grad', qs('#page-birthday'));
    var gridEl = qs('#hero-grid');

    document.addEventListener('mousemove', function(e) {
      if (!qs('#page-birthday').classList.contains('active')) return;

      var xN = e.clientX / window.innerWidth  - 0.5;
      var yN = e.clientY / window.innerHeight - 0.5;

      if (gradEl) gradEl.style.transform = 'translate(' + (xN * 16) + 'px, ' + (yN * 12) + 'px)';
      if (gridEl) gridEl.style.transform = 'translate(' + (xN *  9) + 'px, ' + (yN *  6) + 'px)';

    }, { passive: true });

  }

  /* ============================================================
     I. 3D TILT ON PHOTO FRAMES
  ============================================================ */
  function initPhotoTilt() {

    /* Skip on touch devices */
    if (window.matchMedia('(pointer: coarse)').matches) return;

    var frames = qsa('.photo-frame, .photo-hero-frame', qs('#page-birthday'));

    frames.forEach(function(frame) {

      frame.addEventListener('mousemove', function(e) {
        var rect = frame.getBoundingClientRect();
        var cx   = rect.left + rect.width  / 2;
        var cy   = rect.top  + rect.height / 2;
        var dx   = clamp((e.clientX - cx) / (rect.width  / 2), -1, 1);
        var dy   = clamp((e.clientY - cy) / (rect.height / 2), -1, 1);

        frame.style.transitionDuration = '0s';
        frame.style.transform = 'perspective(900px) rotateX(' + (-dy * 4.5) + 'deg) rotateY(' + (dx * 4.5) + 'deg)';
      });

      frame.addEventListener('mouseleave', function() {
        frame.style.transitionDuration = '0.7s';
        frame.style.transform          = '';
      });

    });

  }

  /* ============================================================
     J. SCROLL CUE CLICK
  ============================================================ */
  function initScrollCue() {

    var cueEl = qs('#scroll-cue');
    if (!cueEl) return;

    function scrollDown() {
      window.scrollBy({ top: window.innerHeight * 0.88, behavior: 'smooth' });
    }

    cueEl.addEventListener('click', scrollDown);

    cueEl.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        scrollDown();
      }
    });

  }

  /* ============================================================
     K. CLICK SPARKLE PARTICLES
  ============================================================ */
  function initClickSparkles() {

    var birthdayPage = qs('#page-birthday');
    if (!birthdayPage) return;

    birthdayPage.addEventListener('click', function(e) {
      emitSparkles(e.clientX, e.clientY, 10);
    });

  }

  function emitSparkles(cx, cy, count) {
    for (var i = 0; i < count; i++) {
      (function(index) {
        var el    = document.createElement('div');
        el.className = 'sparkle';

        var angle = (index / count) * Math.PI * 2 + randF(0, 0.3);
        var dist  = randF(28, 62);
        var size  = randF(1.8, 4.2);
        var dur   = randI(400, 720);

        el.style.cssText = [
          'width: ' + size + 'px',
          'height: ' + size + 'px',
          'left: ' + cx + 'px',
          'top: ' + cy + 'px',
          'opacity: 0.85',
          'transform: translate(-50%, -50%)',
          'transition: transform ' + dur + 'ms cubic-bezier(0.22,1,0.36,1), opacity ' + dur + 'ms ease-out',
        ].join('; ');

        document.body.appendChild(el);

        /* Trigger transition on next frame */
        requestAnimationFrame(function() {
          requestAnimationFrame(function() {
            var tx = Math.cos(angle) * dist;
            var ty = Math.sin(angle) * dist;
            el.style.transform = 'translate(calc(-50% + ' + tx + 'px), calc(-50% + ' + ty + 'px)) scale(0)';
            el.style.opacity   = '0';
          });
        });

        setTimeout(function() { el.remove(); }, dur + 60);

      })(i);
    }
  }

  /* ============================================================
     L. SMOOTH CURSOR GLOW
  ============================================================ */
  function initCursorGlow() {

    /* Skip on touch/coarse devices */
    if (window.matchMedia('(pointer: coarse)').matches) {
      var g = qs('#cursor-glow');
      if (g) g.style.display = 'none';
      return;
    }

    var glowEl = qs('#cursor-glow');
    if (!glowEl) return;

    var targetX = -800, targetY = -800;
    var currentX = -800, currentY = -800;
    var ticking = false;

    document.addEventListener('mousemove', function(e) {
      targetX = e.clientX;
      targetY = e.clientY;
      if (!ticking) {
        ticking = true;
        requestAnimationFrame(animateGlow);
      }
    }, { passive: true });

    function animateGlow() {
      currentX = lerp(currentX, targetX, 0.1);
      currentY = lerp(currentY, targetY, 0.1);
      glowEl.style.left = currentX + 'px';
      glowEl.style.top  = currentY + 'px';
      ticking = false;
    }

  }


  /* ============================================================
     M. SCROLL-LINKED PARALLAX ON PHOTO SECTIONS
  ============================================================ */
  function initScrollParallax() {

    if (window.matchMedia('(pointer: coarse)').matches) return;

    var photoFrames = qsa('.photo-frame img, .photo-hero-frame img', qs('#page-birthday'));

    function updateParallax() {
      photoFrames.forEach(function(img) {
        var frame = img.parentElement;
        var rect  = frame.getBoundingClientRect();
        var vh    = window.innerHeight;

        /* Only when frame is somewhat visible */
        if (rect.bottom < -100 || rect.top > vh + 100) return;

        /* How far through the viewport is the center of the element */
        var center   = (rect.top + rect.height / 2) / vh;
        var offset   = (center - 0.5) * 18;

        img.style.transform = 'translateY(' + offset + 'px) scale(1.055)';
      });
    }

    window.addEventListener('scroll', updateParallax, { passive: true });
    updateParallax();
  }

  /* ============================================================
     N. ORNAMENT DIVIDER — CREATE STAR FIELD IN CLOSING
  ============================================================ */
  function initClosingStarField() {

    var closing = qs('.closing-section', qs('#page-birthday'));
    if (!closing) return;

    var field = document.createElement('div');
    field.className  = 'star-field';
    field.setAttribute('aria-hidden', 'true');
    closing.insertBefore(field, closing.firstChild);

    var starCount = 28;
    for (var i = 0; i < starCount; i++) {
      var star = document.createElement('div');
      star.className = 'star-dot';
      star.style.cssText = [
        'left: '              + randF(0, 100)  + '%',
        'top: '               + randF(0, 100)  + '%',
        'animation-delay: '   + randF(0, 4)    + 's',
        'animation-duration: '+ randF(2, 5)    + 's',
        'width: '             + randF(1, 2)    + 'px',
        'height: '            + randF(1, 2)    + 'px',
        'opacity: '           + randF(0.04, 0.25),
      ].join('; ');
      field.appendChild(star);
    }
  }

  /* ============================================================
     O. PHOTO NUMBER GHOST — PARALLAX ON SCROLL
  ============================================================ */
  function initPhotoNumberParallax() {

    var nums = qsa('.pnum', qs('#page-birthday'));
    if (!nums.length) return;

    window.addEventListener('scroll', function() {
      nums.forEach(function(num) {
        var rect  = num.getBoundingClientRect();
        var vh    = window.innerHeight;
        var prog  = 1 - (rect.top / vh);
        var shift = prog * 12;
        num.style.transform = 'translateY(' + shift + 'px)';
      });
    }, { passive: true });
  }

  /* ============================================================
     P. LAZY IMAGE FADE-IN ON LOAD
  ============================================================ */
  function initImageFadeIn() {

    var images = qsa('img[loading="lazy"]', qs('#page-birthday'));

    images.forEach(function(img) {
      img.style.opacity    = '0';
      img.style.transition = 'opacity 0.8s ease';

      if (img.complete) {
        img.style.opacity = '1';
      } else {
        img.addEventListener('load', function() {
          img.style.opacity = '1';
        });
      }
    });
  }

  /* ============================================================
     Q. NUMPAD HOVER SOUND HAPTIC FEEDBACK (MOBILE)
  ============================================================ */
  function initHapticFeedback() {
    if (!navigator.vibrate) return;

    qsa('.nb').forEach(function(btn) {
      btn.addEventListener('click', function() {
        try { navigator.vibrate(8); } catch(e) {}
      });
    });
  }

  /* ============================================================
     R. GOLD GRADIENT CURSOR TRAIL (DESKTOP)
  ============================================================ */
  function initCursorTrail() {

    if (window.matchMedia('(pointer: coarse)').matches) return;

    var trail     = [];
    var maxTrail  = 6;
    var lastTime  = 0;

    document.addEventListener('mousemove', function(e) {
      var now = Date.now();
      if (now - lastTime < 60) return;
      lastTime = now;

      if (!qs('#page-birthday').classList.contains('active')) return;

      var dot = document.createElement('div');
      dot.style.cssText = [
        'position: fixed',
        'pointer-events: none',
        'z-index: 5',
        'width: 4px',
        'height: 4px',
        'border-radius: 50%',
        'background: rgba(201, 168, 76, 0.45)',
        'top: ' + e.clientY + 'px',
        'left: ' + e.clientX + 'px',
        'transform: translate(-50%, -50%)',
        'transition: opacity 0.6s ease, transform 0.6s ease',
      ].join('; ');

      document.body.appendChild(dot);
      trail.push(dot);

      /* Fade old ones */
      requestAnimationFrame(function() {
        dot.style.opacity   = '0';
        dot.style.transform = 'translate(-50%, -50%) scale(0)';
      });

      setTimeout(function() {
        dot.remove();
        trail = trail.filter(function(d) { return d !== dot; });
      }, 650);
    }, { passive: true });
  }

  /* ============================================================
     S. ENHANCED BIRTHDAY PAGE INIT
     (additional features called from initBirthdayPage)
  ============================================================ */
  var _origInitBirthday = initBirthdayPage;
  initBirthdayPage = function() {
    _origInitBirthday();
    initScrollParallax();
    initClosingStarField();
    initPhotoNumberParallax();
    initImageFadeIn();
    initHapticFeedback();
    initCursorTrail();
  };

  /* ============================================================
     T. KEYBOARD NAVIGATION ON BIRTHDAY PAGE
  ============================================================ */
  document.addEventListener('keydown', function(e) {

    if (!qs('#page-birthday').classList.contains('active')) return;

    /* Space or ArrowDown — scroll down */
    if (e.code === 'Space' || e.code === 'ArrowDown') {
      if (e.target === document.body) {
        e.preventDefault();
        window.scrollBy({ top: window.innerHeight * 0.45, behavior: 'smooth' });
      }
    }

    /* ArrowUp — scroll up */
    if (e.code === 'ArrowUp') {
      if (e.target === document.body) {
        e.preventDefault();
        window.scrollBy({ top: -window.innerHeight * 0.45, behavior: 'smooth' });
      }
    }

    /* M key — toggle music */
    if (e.code === 'KeyM') {
      var btnEl = qs('#m-btn');
      if (btnEl) btnEl.click();
    }

  });

  /* ============================================================
     U. PERFORMANCE — VISIBILITY API PAUSE
  ============================================================ */
  (function initVisibilityPause() {
    document.addEventListener('visibilitychange', function() {
      var audio = qs('#bg-audio');
      if (!audio) return;

      if (document.hidden) {
        /* Page hidden — remember state */
        audio._wasPlaying = !audio.paused;
        if (!audio.paused) audio.pause();
      } else {
        /* Page visible — resume if was playing */
        if (audio._wasPlaying) {
          audio.play().catch(function() {});
        }
      }
    });
  })();

  /* ============================================================
     V. TOUCH SWIPE — SCROLL DOWN GESTURE
  ============================================================ */
  (function initSwipe() {

    var startY = null;
    var minSwipe = 50;

    document.addEventListener('touchstart', function(e) {
      startY = e.touches[0].clientY;
    }, { passive: true });

    document.addEventListener('touchend', function(e) {
      if (startY === null) return;
      var endY = e.changedTouches[0].clientY;
      var diff = startY - endY;

      if (Math.abs(diff) > minSwipe) {
        /* Significant swipe detected — smooth scroll a bit extra */
        window.scrollBy({
          top:      diff * 0.5,
          behavior: 'smooth',
        });
      }

      startY = null;
    }, { passive: true });

  })();

  /* ============================================================
     W. ANIMATED STAT COUNTER (count up effect)
  ============================================================ */
  function animateStatFigure(el, targetValue, duration) {
    if (!el || isNaN(targetValue)) return;

    var start     = 0;
    var startTime = null;

    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      var progress = Math.min((timestamp - startTime) / duration, 1);
      var ease     = 1 - Math.pow(1 - progress, 3); /* easeOutCubic */
      var current  = Math.floor(ease * targetValue);

      el.textContent = current;

      if (progress < 1) {
        requestAnimationFrame(step);
      } else {
        el.textContent = targetValue;
      }
    }

    requestAnimationFrame(step);
  }

  /* Observe stat-yr to trigger animation when it enters view */
  (function initStatAnimation() {

    var statEl = qs('#stat-yr');
    if (!statEl) return;

    var io = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          var yr = parseInt(String(new Date().getFullYear()).slice(-2));
          animateStatFigure(statEl, yr, 1400);
          io.unobserve(statEl);
        }
      });
    }, { threshold: 0.5 });

    /* Observe will activate once page-birthday is shown */
    var pageObserver = new MutationObserver(function() {
      if (qs('#page-birthday').classList.contains('active')) {
        io.observe(statEl);
        pageObserver.disconnect();
      }
    });

    pageObserver.observe(qs('#page-birthday'), { attributes: true, attributeFilter: ['class'] });

  })();

  </script>
</body>
</html>